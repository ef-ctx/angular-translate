!function(){"use strict";var a=angular.module("pascalprecht.translate",["ng"]);a.factory("$translateDefaultInterpolation",["$interpolate",function(a){var b,c={},d="default",e=null,f={escaped:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=angular.element("<div></div>").text(a[c]).html());return b}},g=function(a){var b;return b=angular.isFunction(f[e])?f[e](a):a};return c.setLocale=function(a){b=a},c.getInterpolationIdentifier=function(){return d},c.useSanitizeValueStrategy=function(a){return e=a,this},c.interpolate=function(b,c){return e&&(c=g(c)),a(b)(c)},c}]),a.factory("fileLoader",["$q","$http",function(a,b){return function(c){var d=a.defer(),e=c.prefix||"",f=c.suffix||"",g={url:e+c.name+f,method:"GET",params:""};return b(g).then(function(a){d.resolve(a.data)},function(a){d.reject(a)}),d.promise}}]),a.provider("$translate",[function(){var a={},b={linkKeyRegExp:/@\:\((.*?)?\)/g},c=".",d=function(b){return b&&(a=angular.extend(a,e(b))),a};this.translations=d;var e=function(a,b,d,f){var g,h,i,j;b||(b=[]),d||(d={});for(g in a)a.hasOwnProperty(g)&&(j=a[g],angular.isObject(j)?e(j,b.concat(g),d,g):(h=b.length?""+b.join(c)+c+g:g,b.length&&g===f&&(i=""+b.join(c),d[i]="@:"+h),d[h]=j));return d},f=function(a){return a&&(b.locale=a),a};this.setLocale=f,this.setLanguage=f,this.preferredLanguage=f,this.configure=function(a){angular.extend(b,a)},this.linkKeyRegExp=function(a){return a?(b.linkKeyRegExp=a,this):b.linkKeyRegExp};var g=function(c){var d=a.hasOwnProperty(c)?a[c]:void 0,e=b.linkKeyRegExp;if(void 0!==d)return d.match(e)&&d.match(e).length>0?d.replace(e,function(b,c){return g(c,a)}):d;throw new Error("cxTranslate.Translation Error : "+c+" key not found error")};this.$get=["$injector",function(a){var c=a.get("$translateDefaultInterpolation"),e=a.get("fileLoader");c.setLocale(b.locale);var f=function(a,b){var d;if(a=a.trim(),"undefined"==typeof a||""===a)d=a;else try{d=c.interpolate(g(a),b)||""}catch(e){throw new Error("cxTranslate.Translation Error : Trying to resolve "+a+" a key or a sub key was not found",e)}return d};return f.getLocale=function(){return b.locale},f.getConfig=function(){return b},f.loadFile=function(a){if(a=a||b.file,!a)throw new Error("cxTranslate.loadFile function error: No file properly configured to be loaded");e(a).then(function(a){d(a)},function(a){console.error(a)})},f}]}]),a.filter("translate",["$parse","$translate",function(a,b){return function(c,d){var e;angular.isObject(d)||(d=a(d)());try{e=b(c,d)}catch(f){e=void 0}return e}}]),a.directive("translate",["$translate","$parse",function(a,b){return{restrict:"AE",scope:{translate:"@"},link:function(c,d,e){var f=function(){var b=e.prefix?d[0].attributes.getNamedItem(e.$attr.prefix).value:"",f=e.suffix?d[0].attributes.getNamedItem(e.$attr.suffix).value:"";try{d.html(b+a(c.translate,c.interpolateParams)+f)}catch(g){}};c.interpolateParams={},e.translateValues&&(c.interpolateParams=b(e.translateValues)(c.$parent),e.$observe("translateValues",function(a){a&&c.$parent.$watch(function(){angular.extend(c.interpolateParams,b(a)(c.$parent))})})),c.fallbackValue=d.html(),c.$watch("translate",f),c.$watch("interpolateParams",f,!0),f()}}}]),a.run(["$translate",function(a){a.loadFile()}])}();